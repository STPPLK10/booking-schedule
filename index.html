<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏õ‡∏µ (26-31 ‡∏ò.‡∏Ñ.)</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #6366f1;
      --jin-color: #0ea5e9;
      --jin-bg: #e0f2fe;
      --ten-color: #8b5cf6;
      --ten-bg: #ede9fe;
      --couple-color: #d97706; /* Golden Amber */
      --couple-bg: #fffbeb;
      --available-text: #059669;
      --available-bg: #d1fae5;
      --full-text: #e11d48;
      --full-bg: #ffe4e6;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Prompt', sans-serif;
      /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ò‡∏µ‡∏° Winter Night Gradient */
      background: linear-gradient(to bottom, #1e293b 0%, #334155 100%);
      padding: 20px;
      min-height: 100vh;
      color: #334155;
      overflow-x: hidden;
      position: relative;
    }

    /* Snow Effect */
    .snowflake {
      position: absolute;
      top: -10px;
      color: #fff;
      font-size: 1em;
      font-family: Arial;
      text-shadow: 0 0 1px #000;
      user-select: none;
      z-index: 0;
      pointer-events: none;
      animation: fall linear forwards;
    }

    @keyframes fall {
      to { transform: translateY(100vh); }
    }
    
    .container {
      position: relative;
      z-index: 1;
      max-width: 1000px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(12px);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }
    
    h1 {
      text-align: center;
      color: #1e293b;
      margin-bottom: 5px;
      font-size: 2em;
      font-weight: 600;
      text-shadow: 2px 2px 0px #e2e8f0;
    }

    .festive-deco {
        font-size: 1.2em;
    }
    
    .subtitle {
      text-align: center;
      color: #64748b;
      margin-bottom: 30px;
      font-size: 1.1em;
      font-weight: 300;
    }
    
    .schedule-grid {
      display: grid;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .day-card {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      border: 1px solid #f1f5f9;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .day-card:hover {
      box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.1);
      transform: translateY(-3px);
    }

    /* Gold Border for Couple Work (Festive!) */
    .day-card.couple-work {
      border: 2px solid #fbbf24;
      background: linear-gradient(to bottom right, #fff, #fffbeb);
      position: relative;
      overflow: hidden;
    }
    
    /* Sparkle Animation for Couple Cards */
    .day-card.couple-work::before {
        content: '';
        position: absolute;
        top: 0; left: -100%;
        width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,215,0,0.2), transparent);
        animation: shine 3s infinite;
    }

    @keyframes shine {
        100% { left: 100%; }
    }
    
    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px dashed #cbd5e1;
      position: relative;
      z-index: 2;
    }
    
    .day-info {
      display: flex;
      flex-direction: column;
    }

    .day-name {
      font-size: 1.4em;
      font-weight: 600;
      color: #0f172a;
    }
    
    .day-date {
      font-size: 0.9em;
      color: #64748b;
    }
    
    .couple-badge {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      padding: 6px 16px;
      border-radius: 50px;
      font-size: 0.85em;
      font-weight: 600;
      box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3);
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .dual-person-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 768px) {
      .dual-person-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      .container { padding: 25px 20px; }
      h1 { font-size: 1.6em; }
    }
    
    .person-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px;
      border-radius: 12px;
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 1em;
    }
    
    .person-header.jin { background: var(--jin-bg); color: var(--jin-color); }
    .person-header.ten { background: var(--ten-bg); color: var(--ten-color); }
    
    .time-slots {
      display: grid;
      gap: 8px;
      position: relative;
      z-index: 2;
    }
    
    .time-slot {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      border-radius: 12px;
      background: #f8fafc;
      border: 1px solid transparent;
      transition: all 0.2s ease;
    }
    
    .time-slot:hover {
      background: #fff;
      border-color: #e2e8f0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .time-slot.editable { cursor: pointer; }
    .time-slot.editable:hover { border-color: var(--primary); }
    
    .time-label {
      font-size: 0.95em;
      font-weight: 500;
      color: #334155;
    }
    
    .status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8em;
      font-weight: 600;
      letter-spacing: 0.3px;
    }
    
    .status.available {
      background: var(--available-bg);
      color: var(--available-text);
      border: 1px solid #a7f3d0;
    }
    
    .status.full {
      background: var(--full-bg);
      color: var(--full-text);
      opacity: 0.8;
      border: 1px solid #fecdd3;
    }

    .unlock-btn {
      padding: 10px 24px;
      background: rgba(255,255,255,0.8);
      color: #64748b;
      border: 1px solid #cbd5e1;
      border-radius: 50px;
      font-family: 'Prompt', sans-serif;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .unlock-btn:hover { background: #fff; color: #334155; transform: translateY(-1px); }
    .unlock-btn.unlocked { color: #d97706; border-color: #f59e0b; background: #fffbeb; }

    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
      background: rgba(241, 245, 249, 0.5);
      padding: 15px;
      border-radius: 16px;
    }
    
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: #475569; }
    .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
    
    .note {
      text-align: center;
      color: #64748b;
      font-size: 0.85em;
      margin-top: 25px;
      padding: 15px;
      background: #f8fafc;
      border-radius: 12px;
      border: 1px dashed #cbd5e1;
    }

    .admin-section {
        display: none;
        margin-top: 20px;
    }

  </style>
</head>
<body>
  <div id="snow"></div>

  <div class="container">
    <h1>üéÑ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô <span class="festive-deco">üéâ</span></h1>
    <p class="subtitle">‡∏™‡πà‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏õ‡∏µ‡πÄ‡∏Å‡πà‡∏≤ 26 - 31 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2025</p>
    
    <div class="schedule-grid" id="scheduleGrid"></div>
    
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background: var(--available-text);"></div>‡∏ß‡πà‡∏≤‡∏á</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--full-text);"></div>‡πÄ‡∏ï‡πá‡∏°</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--jin-color);"></div>‡∏à‡∏¥‡∏ì‡∏ì‡πå</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--ten-color);"></div>‡πÄ‡∏ó‡πá‡∏ô</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--couple-color);"></div>‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà</div>
    </div>
    
    <div class="note">
      üí° <strong>Note:</strong> Airbnb ‡πÄ‡∏£‡∏¥‡πà‡∏° 20.00-09.00 | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 30-31 ‡∏ò.‡∏Ñ. ‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà ü•Ç
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <button id="unlockBtn" class="unlock-btn" onclick="toggleEditMode()">üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button>
    </div>

    <div id="adminSection" class="admin-section"></div>
  </div>

  <script>
    // --- Snow Effect Script ---
    function createSnow() {
      const snowContainer = document.getElementById('snow');
      const snowflakeCount = 30; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏¥‡∏°‡∏∞
      
      for (let i = 0; i < snowflakeCount; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = ['‚ùÑ', '‚ùÖ', '‚ùÜ'][Math.floor(Math.random() * 3)];
        
        // Random Properties
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.opacity = Math.random();
        snowflake.style.fontSize = (Math.random() * 20 + 10) + 'px';
        snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's'; // 5-10s
        snowflake.style.animationDelay = (Math.random() * 5) + 's';
        
        snowContainer.appendChild(snowflake);
      }
    }
    createSnow();

    // --- Data Configuration ---
    const scheduleData = {
      '2025-12-26': {
        day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
        date: '26 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-27': {
        day: '‡πÄ‡∏™‡∏≤‡∏£‡πå',
        date: '27 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': false, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': false, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-28': {
        day: '‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå',
        date: '28 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-29': {
        day: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå',
        date: '29 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-30': {
        day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
        date: '30 ‡∏ò.‡∏Ñ.',
        isCouple: true,
        slots: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-31': {
        day: '‡∏û‡∏∏‡∏ò',
        date: '31 ‡∏ò.‡∏Ñ.',
        isCouple: true,
        slots: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      }
    };

    const slotMapping = ['Airbnb (20:00-09:00)', '10:00-13:00', '14:00-17:00', '18:00-20:30'];

    // --- Logic Functions ---

    function parseURLParameters() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('state')) {
        const hex = params.get('state');
        let binary = '';
        for (let i = 0; i < hex.length; i++) {
          binary += parseInt(hex[i], 16).toString(2).padStart(4, '0');
        }
        let index = 0;
        Object.keys(scheduleData).forEach(dateKey => {
          const dayData = scheduleData[dateKey];
          if (dayData.isCouple) {
            Object.keys(dayData.slots).forEach(timeSlot => {
              if (index < binary.length) { dayData.slots[timeSlot] = binary[index] === '1'; index++; }
            });
          } else {
            ['jin', 'ten'].forEach(person => {
              Object.keys(dayData[person]).forEach(timeSlot => {
                if (index < binary.length) { dayData[person][timeSlot] = binary[index] === '1'; index++; }
              });
            });
          }
        });
        return [];
      }
      return [];
    }

    let editMode = false;
    let adminMode = false;

    function toggleEditMode() {
      editMode = !editMode;
      const btn = document.getElementById('unlockBtn');
      if (editMode) {
        btn.innerHTML = 'üîì ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)';
        btn.classList.add('unlocked');
      } else {
        btn.innerHTML = 'üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞';
        btn.classList.remove('unlocked');
      }
      renderSchedule();
    }

    function toggleSlotStatus(dateKey, person, timeSlot) {
      if (!editMode) return;
      const dayData = scheduleData[dateKey];
      if (dayData.isCouple) {
        dayData.slots[timeSlot] = !dayData.slots[timeSlot];
      } else {
        dayData[person][timeSlot] = !dayData[person][timeSlot];
      }
      renderSchedule();
    }

    function checkAdminMode() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('admin')) adminMode = true;
    }

    function renderTimeSlot(timeSlot, isAvailable, dateKey, person) {
        const slotDiv = document.createElement('div');
        slotDiv.className = 'time-slot' + (editMode ? ' editable' : '');
        
        if (editMode) {
            slotDiv.onclick = () => toggleSlotStatus(dateKey, person, timeSlot);
        }

        const timeLabel = document.createElement('span');
        timeLabel.className = 'time-label';
        timeLabel.textContent = timeSlot;

        const statusSpan = document.createElement('span');
        statusSpan.className = `status ${isAvailable ? 'available' : 'full'}`;
        statusSpan.textContent = isAvailable ? '‡∏ß‡πà‡∏≤‡∏á' : '‡πÄ‡∏ï‡πá‡∏°';

        slotDiv.appendChild(timeLabel);
        slotDiv.appendChild(statusSpan);
        return slotDiv;
    }

    function renderSchedule() {
      const grid = document.getElementById('scheduleGrid');
      grid.innerHTML = '';
      
      Object.keys(scheduleData).forEach(dateKey => {
        const dayData = scheduleData[dateKey];
        const dayCard = document.createElement('div');
        dayCard.className = 'day-card' + (dayData.isCouple ? ' couple-work' : '');
        
        // Header
        const dayHeader = document.createElement('div');
        dayHeader.className = 'day-header';
        
        const infoDiv = document.createElement('div');
        infoDiv.className = 'day-info';
        infoDiv.innerHTML = `<span class="day-name">${dayData.day}</span><span class="day-date">${dayData.date}</span>`;
        
        dayHeader.appendChild(infoDiv);
        
        if (dayData.isCouple) {
            const badge = document.createElement('div');
            badge.className = 'couple-badge';
            badge.innerHTML = '<span>‚ú®</span> ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà';
            dayHeader.appendChild(badge);
        }
        dayCard.appendChild(dayHeader);

        // Body
        if (dayData.isCouple) {
            const timeSlotsDiv = document.createElement('div');
            timeSlotsDiv.className = 'time-slots';
            Object.keys(dayData.slots).forEach(slot => {
                timeSlotsDiv.appendChild(renderTimeSlot(slot, dayData.slots[slot], dateKey, null));
            });
            dayCard.appendChild(timeSlotsDiv);
        } else {
            const dualGrid = document.createElement('div');
            dualGrid.className = 'dual-person-grid';
            
            ['jin', 'ten'].forEach(person => {
                const col = document.createElement('div');
                
                const pHeader = document.createElement('div');
                pHeader.className = `person-header ${person}`;
                pHeader.innerHTML = person === 'jin' ? 'üçÜ ‡∏à‡∏¥‡∏ì‡∏ì‡πå' : 'üçë ‡πÄ‡∏ó‡πá‡∏ô';
                col.appendChild(pHeader);

                const timeSlotsDiv = document.createElement('div');
                timeSlotsDiv.className = 'time-slots';
                Object.keys(dayData[person]).forEach(slot => {
                    timeSlotsDiv.appendChild(renderTimeSlot(slot, dayData[person][slot], dateKey, person));
                });
                col.appendChild(timeSlotsDiv);
                dualGrid.appendChild(col);
            });
            dayCard.appendChild(dualGrid);
        }

        grid.appendChild(dayCard);
      });
    }

    // Init
    checkAdminMode();
    parseURLParameters();
    renderSchedule();
  </script>
</body>
</html>
