<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡∏á‡∏≤‡∏ô N (26-31 ‡∏ò.‡∏Ñ.)</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #6366f1;
      --jin-color: #0ea5e9; /* Sky Blue */
      --jin-bg: #e0f2fe;
      --ten-color: #8b5cf6; /* Violet */
      --ten-bg: #ede9fe;
      --couple-color: #f59e0b; /* Amber */
      --couple-bg: #fffbeb;
      --available-text: #059669;
      --available-bg: #d1fae5;
      --full-text: #e11d48;
      --full-bg: #ffe4e6;
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      --hover-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Prompt', sans-serif;
      /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏•‡∏™‡∏î‡πÉ‡∏™‡πÅ‡∏ï‡πà‡∏™‡∏ö‡∏≤‡∏¢‡∏ï‡∏≤ */
      background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
      padding: 20px;
      min-height: 100vh;
      color: #334155;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    h1 {
      text-align: center;
      color: #1e293b;
      margin-bottom: 5px;
      font-size: 1.8em;
      font-weight: 600;
    }
    
    .subtitle {
      text-align: center;
      color: #64748b;
      margin-bottom: 30px;
      font-size: 1em;
      font-weight: 300;
    }
    
    .schedule-grid {
      display: grid;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .day-card {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      border: 1px solid #f1f5f9;
      box-shadow: var(--card-shadow);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .day-card:hover {
      box-shadow: var(--hover-shadow);
      transform: translateY(-2px);
    }

    .day-card.couple-work {
      border: 2px solid #fcd34d;
      background: linear-gradient(to bottom right, #fff, #fffbeb);
    }
    
    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px dashed #cbd5e1;
    }
    
    .day-info {
      display: flex;
      flex-direction: column;
    }

    .day-name {
      font-size: 1.4em;
      font-weight: 600;
      color: #1e293b;
    }
    
    .day-date {
      font-size: 0.9em;
      color: #94a3b8;
    }
    
    .couple-badge {
      background: var(--couple-bg);
      color: var(--couple-color);
      padding: 6px 16px;
      border-radius: 50px;
      font-size: 0.85em;
      font-weight: 600;
      border: 1px solid #fcd34d;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* Grid Layout for People */
    .dual-person-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 768px) {
      .dual-person-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      .container { padding: 20px; }
      .legend { flex-direction: column; gap: 10px; }
    }
    
    .person-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 8px;
      border-radius: 12px;
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 0.95em;
    }
    
    .person-header.jin { background: var(--jin-bg); color: var(--jin-color); }
    .person-header.ten { background: var(--ten-bg); color: var(--ten-color); }
    
    .time-slots {
      display: grid;
      gap: 8px;
    }
    
    .time-slot {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 14px;
      border-radius: 10px;
      background: #f8fafc;
      border: 1px solid transparent;
      transition: all 0.2s ease;
    }
    
    .time-slot:hover {
      background: #fff;
      border-color: #e2e8f0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .time-slot.editable { cursor: pointer; }
    .time-slot.editable:hover { border-color: var(--primary); }
    
    .time-label {
      font-size: 0.9em;
      font-weight: 500;
      color: #475569;
    }
    
    /* Pill Status Style */
    .status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8em;
      font-weight: 600;
      letter-spacing: 0.3px;
    }
    
    .status.available {
      background: var(--available-bg);
      color: var(--available-text);
    }
    
    .status.full {
      background: var(--full-bg);
      color: var(--full-text);
      opacity: 0.8;
    }
    
    /* Buttons */
    .copy-all-btn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1em;
      font-family: 'Prompt', sans-serif;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .copy-all-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(79, 70, 229, 0.4);
    }
    
    .copy-all-btn.copied { background: #10b981; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }

    .unlock-btn {
      padding: 8px 24px;
      background: transparent;
      color: #94a3b8;
      border: 1px solid #cbd5e1;
      border-radius: 50px;
      font-family: 'Prompt', sans-serif;
      font-size: 0.85em;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .unlock-btn:hover { color: #64748b; border-color: #94a3b8; background: #f8fafc; }
    .unlock-btn.unlocked { color: #f59e0b; border-color: #f59e0b; background: #fffbeb; }

    /* Legend & Note */
    .legend {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: #475569; }
    .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
    
    .note {
      text-align: center;
      color: #64748b;
      font-size: 0.85em;
      margin-top: 25px;
      padding: 15px;
      background: #f8fafc;
      border-radius: 12px;
      border: 1px dashed #cbd5e1;
    }

    /* Admin Copy Button (Small) */
    .copy-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: none;
      background: #e2e8f0;
      color: #475569;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8em;
      transition: all 0.2s;
    }
    .copy-btn:hover { background: #cbd5e1; }
    .copy-btn.copied { background: #10b981; color: white; }

    .admin-section {
        display: none; /* Hide by default */
        margin-top: 20px;
    }

  </style>
</head>
<body>
  <div class="container">
    <h1>üóìÔ∏è ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ß‡πà‡∏≤‡∏á</h1>
    <p class="subtitle">26 - 31 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2025</p>
    
    <div style="text-align: center; margin-bottom: 30px;">
      <button id="copyAllBtn" class="copy-all-btn">
        <span>üîó</span> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ
      </button>
    </div>
    
    <div class="schedule-grid" id="scheduleGrid"></div>
    
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background: var(--available-text);"></div>‡∏ß‡πà‡∏≤‡∏á</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--full-text);"></div>‡πÄ‡∏ï‡πá‡∏°</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--jin-color);"></div>‡∏à‡∏¥‡∏ì</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--ten-color);"></div>‡πÄ‡∏ó‡πá‡∏ô</div>
      <div class="legend-item"><div class="legend-dot" style="background: var(--couple-color);"></div>‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà</div>
    </div>
    
    <div class="note">
      üí° <strong>Note:</strong> Airbnb ‡πÄ‡∏£‡∏¥‡πà‡∏° 20.00-09.00 | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 30-31 ‡∏ò.‡∏Ñ. ‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <button id="unlockBtn" class="unlock-btn" onclick="toggleEditMode()">üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button>
    </div>

    <div id="adminSection" class="admin-section"></div>
  </div>

  <script>
    // --- Data Configuration (Updated Dates) ---
    const scheduleData = {
      '2025-12-26': {
        day: '‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå',
        date: '26 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-27': {
        day: '‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå',
        date: '27 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': false, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': false, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-28': {
        day: '‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå',
        date: '28 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': false, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-29': {
        day: '‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå',
        date: '29 ‡∏ò.‡∏Ñ.',
        isCouple: false,
        jin: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true },
        ten: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-30': {
        day: '‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        date: '30 ‡∏ò.‡∏Ñ.',
        isCouple: true,
        slots: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      },
      '2025-12-31': {
        day: '‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò', // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        date: '31 ‡∏ò.‡∏Ñ.',
        isCouple: true,
        slots: { 'Airbnb (20:00-09:00)': true, '10:00-13:00': true, '14:00-17:00': true, '18:00-20:30': true }
      }
    };

    const slotMapping = ['Airbnb (20:00-09:00)', '10:00-13:00', '14:00-17:00', '18:00-20:30'];

    // --- Logic Functions ---

    function parseURLParameters() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('state')) {
        const hex = params.get('state');
        let binary = '';
        for (let i = 0; i < hex.length; i++) {
          binary += parseInt(hex[i], 16).toString(2).padStart(4, '0');
        }
        let index = 0;
        Object.keys(scheduleData).forEach(dateKey => {
          const dayData = scheduleData[dateKey];
          if (dayData.isCouple) {
            Object.keys(dayData.slots).forEach(timeSlot => {
              if (index < binary.length) { dayData.slots[timeSlot] = binary[index] === '1'; index++; }
            });
          } else {
            ['jin', 'ten'].forEach(person => {
              Object.keys(dayData[person]).forEach(timeSlot => {
                if (index < binary.length) { dayData[person][timeSlot] = binary[index] === '1'; index++; }
              });
            });
          }
        });
        return [];
      }
      return []; // Ignore legacy format for cleanliness
    }

    function generateShortLink(dateKey, person, slotIndex, currentStatus) {
      // Legacy support for single slot link if needed, but UI uses Copy All mostly
      return window.location.href; 
    }

    function generateFullScheduleLink() {
      const baseUrl = window.location.origin + window.location.pathname;
      let encoded = '';
      Object.keys(scheduleData).forEach(dateKey => {
        const dayData = scheduleData[dateKey];
        if (dayData.isCouple) {
          Object.keys(dayData.slots).forEach(s => encoded += dayData.slots[s] ? '1' : '0');
        } else {
          ['jin', 'ten'].forEach(p => {
            Object.keys(dayData[p]).forEach(s => encoded += dayData[p][s] ? '1' : '0');
          });
        }
      });
      let hex = '';
      for (let i = 0; i < encoded.length; i += 4) {
        hex += parseInt(encoded.substr(i, 4), 2).toString(16);
      }
      return `${baseUrl}?state=${hex}`;
    }

    function copyFullSchedule() {
      const link = generateFullScheduleLink();
      const btn = document.getElementById('copyAllBtn');
      navigator.clipboard.writeText(link).then(() => {
        btn.innerHTML = '<span>‚úì</span> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.innerHTML = '<span>üîó</span> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ';
          btn.classList.remove('copied');
        }, 2000);
      });
    }

    let editMode = false;
    let adminMode = false; // Hidden feature via URL ?admin=true

    function toggleEditMode() {
      editMode = !editMode;
      const btn = document.getElementById('unlockBtn');
      if (editMode) {
        btn.innerHTML = 'üîì ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)';
        btn.classList.add('unlocked');
      } else {
        btn.innerHTML = 'üîí ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞';
        btn.classList.remove('unlocked');
      }
      renderSchedule();
    }

    function toggleSlotStatus(dateKey, person, timeSlot) {
      if (!editMode) return;
      const dayData = scheduleData[dateKey];
      if (dayData.isCouple) {
        dayData.slots[timeSlot] = !dayData.slots[timeSlot];
      } else {
        dayData[person][timeSlot] = !dayData[person][timeSlot];
      }
      renderSchedule();
    }

    function checkAdminMode() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('admin')) adminMode = true;
    }

    function renderTimeSlot(timeSlot, isAvailable, dateKey, person) {
        const slotDiv = document.createElement('div');
        slotDiv.className = 'time-slot' + (editMode ? ' editable' : '');
        
        if (editMode) {
            slotDiv.onclick = () => toggleSlotStatus(dateKey, person, timeSlot);
        }

        const timeLabel = document.createElement('span');
        timeLabel.className = 'time-label';
        timeLabel.textContent = timeSlot;

        const statusSpan = document.createElement('span');
        statusSpan.className = `status ${isAvailable ? 'available' : 'full'}`;
        statusSpan.textContent = isAvailable ? '‡∏ß‡πà‡∏≤‡∏á' : '‡πÄ‡∏ï‡πá‡∏°';

        slotDiv.appendChild(timeLabel);
        slotDiv.appendChild(statusSpan);
        return slotDiv;
    }

    function renderSchedule() {
      const grid = document.getElementById('scheduleGrid');
      grid.innerHTML = '';
      
      Object.keys(scheduleData).forEach(dateKey => {
        const dayData = scheduleData[dateKey];
        const dayCard = document.createElement('div');
        dayCard.className = 'day-card' + (dayData.isCouple ? ' couple-work' : '');
        
        // Header
        const dayHeader = document.createElement('div');
        dayHeader.className = 'day-header';
        
        const infoDiv = document.createElement('div');
        infoDiv.className = 'day-info';
        infoDiv.innerHTML = `<span class="day-name">${dayData.day}</span><span class="day-date">${dayData.date}</span>`;
        
        dayHeader.appendChild(infoDiv);
        
        if (dayData.isCouple) {
            const badge = document.createElement('div');
            badge.className = 'couple-badge';
            badge.innerHTML = '<span>‚ú®</span> ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà';
            dayHeader.appendChild(badge);
        }
        dayCard.appendChild(dayHeader);

        // Body
        if (dayData.isCouple) {
            const timeSlotsDiv = document.createElement('div');
            timeSlotsDiv.className = 'time-slots';
            Object.keys(dayData.slots).forEach(slot => {
                timeSlotsDiv.appendChild(renderTimeSlot(slot, dayData.slots[slot], dateKey, null));
            });
            dayCard.appendChild(timeSlotsDiv);
        } else {
            const dualGrid = document.createElement('div');
            dualGrid.className = 'dual-person-grid';
            
            ['jin', 'ten'].forEach(person => {
                const col = document.createElement('div');
                
                const pHeader = document.createElement('div');
                pHeader.className = `person-header ${person}`;
                pHeader.innerHTML = person === 'jin' ? 'üçÜ ‡∏à‡∏¥‡∏ì' : 'üçë ‡πÄ‡∏ó‡πá‡∏ô';
                col.appendChild(pHeader);

                const timeSlotsDiv = document.createElement('div');
                timeSlotsDiv.className = 'time-slots';
                Object.keys(dayData[person]).forEach(slot => {
                    timeSlotsDiv.appendChild(renderTimeSlot(slot, dayData[person][slot], dateKey, person));
                });
                col.appendChild(timeSlotsDiv);
                dualGrid.appendChild(col);
            });
            dayCard.appendChild(dualGrid);
        }

        grid.appendChild(dayCard);
      });
    }

    // Init
    checkAdminMode();
    parseURLParameters();
    renderSchedule();
    document.getElementById('copyAllBtn').addEventListener('click', copyFullSchedule);
  </script>
</body>
</html>
